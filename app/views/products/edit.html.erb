<h1>Products#edit</h1>

<h3>商品の詳細編集</h3>
<%= form_with model: @product, local: true do |f| %>

<div class="">
  <%= f.label :image %>
  <%= f.file_field :image %>
</div>

<div class="">
  <%= f.label :name %>
  <%= f.text_field :name %>
</div>

<div class="">
  <%= f.label :text %>
  <%= f.text_area :text %>
</div>

<%# showで表示 %>
<div class="#">
  <%= f.label :title %>
  <%= f.text_field :title %>
</div>

<div class="#">
  <%= f.label :text2 %>
  <%= f.text_field :text2 %>
</div>

<div class="#">
  <%= f.label :price %>
  <%= f.text_field :price %>
</div>

<div class="#">
  <%= f.label :unit %>
  <%= f.text_field :unit %>

<%= f.submit "編集する", class:"#" %>
<% end %>
<br>

<%# ここにタイトルを引っ張りたい %>
<%#= link_to "「〇〇」の商品ページを編集する", edit_product_path(@product.id) %>
<%= button_to "「〇〇」の商品ページを削除する", product_path(@product.id), method: :delete %>

<div class="">
    <div>
      <%= @product.name %>
      <%= @product.title %>
      <%= @product.text2 %>
    </div>
  <%= image_tag @product.image, class: "#", :size => "260x180" if @product.image.attached?  %>
</div>

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
<%# ここからポイント%>
<h3>おすすめポイント</h3>
<div class="">
  <div class="#">
    <% @points.each do |point|  %>
        <%#= link_to edit_product_point_path(@product, point.id) do %> <%# @product, point.id(@point)でそれぞれのidを取得してる %>
        <%= point.title %>
        <%= point.text %>
        <%= image_tag point.image, class: "#", :size => "260x180" if point.image.attached?  %>
            <%# 編集用のフォーム %>
          <%= form_with model: @point, url:product_point_path(@product, point.id), method: :PATCH, local: true do |f| %>
            <div class="#">
              <%= f.label :title %>
              <%= f.text_field :title %>
            </div>

            <div class="">
              <%= f.label :text %>
              <%= f.text_area :text %>
            </div>

            <div class="">
              <%= f.label :image %>
              <%= f.file_field :image %>
            </div>

            <%= f.submit "編集する", class:"#" %>
            <% end %>
          <%= button_to "削除する", product_point_path(@product, point.id), method: :delete %>
        <br>
    <% end %>
</div>

<%# 追加 %>
<div class="">
  <%= form_with url:product_points_path(@product.id), local: true do |f| %>

  <div class="#">
    <%= f.label :title %>
    <%= f.text_field :title %>
  </div>

  <div class="">
    <%= f.label :text %>
    <%= f.text_area :text %>
  </div>

  <div class="">
    <%= f.label :image %>
    <%= f.file_field :image %>
  </div>

  <%= f.submit "追加する", class:"#" %>
  <% end %>
</div>
<%# /ここまでポイント %>

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
<%# ここから旅程作成 表題もクライアントが作れる用にする %>
<h3>旅程</h3>
<div class="">
  <div class="#">
    <% @itinerarys.each do |itinerary|  %>
        <%= itinerary.time %>
        <%= itinerary.title %>
        <%= itinerary.text %>
        <%= image_tag itinerary.image, class: "#", :size => "260x180" if itinerary.image.attached?  %>
            <%# 編集用のフォーム %>
          <%= form_with model: @itinerary, url:product_itinerary_path(@product, itinerary.id), method: :PATCH, local: true do |f| %>
            <div class="#">
              <%= f.label :time %>
              <%= f.text_field :time %>
            </div>

            <div class="#">
              <%= f.label :title %>
              <%= f.text_field :title %>
            </div>

            <div class="">
              <%= f.label :text %>
              <%= f.text_area :text %>
            </div>

            <div class="">
              <%= f.label :image %>
              <%= f.file_field :image %>
            </div>

            <%= f.submit "編集する", class:"#" %>
            <% end %>
          <%= button_to "削除する", product_itinerary_path(@product, itinerary.id), method: :delete %>
        <br>
    <% end %>
</div>

<%# 追加 %>
<div>
  <%= form_with url:product_itinerarys_path(@product.id), local: true do |f| %>

    <div class="">
    <%= f.label :time %>
    <%= f.text_field :time %>
    </div>

    <div class="">
    <%= f.label :title %>
    <%= f.text_field :title %>
    </div>

    <div class="">
    <%= f.label :text %>
    <%= f.text_area :text %>
    </div>

    <div class="">
    <%= f.label :image %>
    <%= f.file_field :image %>
    </div>

  <%= f.submit "作成する", class:"#" %>
  <% end %>
</div>
<%# /ここまで旅程作成  %>


-----------------------------------------------------



<%# 申し込みフォーム %>
<h3>申し込みフォーム</h3>

<div class="#">
  <div class="#">
    <P>一人あたりの値段</P>
      <div class="#" >
        <p>¥<span id="one_price"><%= @product.price %></span></p>
      </div>
    <P>合計金額</P>  
      <div class="#" id="total_price">
        <p>¥0</p>
      </div>
  </div>

  <div class="#">
    <%= form_with url:new_product_event_path(@product.id), method: :get, local: true do |f| %>

      <div>
        <%= f.hidden_field :price, id: "f_price"  %>
      </div>

      <div class="#">
        <%= f.label :num, '参加人数' %>
          <% num_options = Num.order(:id).map { |c| [c.name, c.id, data: { multiple: c.multiple }] } %>
        <%= f.select(:num_id, num_options, {}, {class:"#", data:{select:0}, id:"num" }) %>
      </div>

      <div class="plan_day">
        <%= f.label :start_time, 'ご希望日' %>
        <%= f.date_select :start_time %>
      </div>
      <%# unless client_signed_in? %>
        <div class="submit">
          <%= f.submit "確認画面へ", class:"#" %>
        </div>
      <%# end %>
    <% end %>
  </div>
</div>

<%= link_to "戻る", root_path, class:"#" %>





